sudo: required
language: node_js
node_js:
  - 12.13.0
cache: skip
services:
  - docker
env:
  matrix:
    - NODE_CONTAINER=12.13-stretch
before_install:
  - docker pull node:$NODE_CONTAINER
install:
  - docker run -v $(pwd):/app node:$NODE_CONTAINER bash -c "cd app && yarn install"
script:
  - docker run -v $(pwd):app/ node:$NODE_CONTAINER bash -c "cd app && yarn build"
  - docker run -v $(pwd):app/ node:$NODE_CONTAINER bash -c "cd app && yarn lint"
  - docker run -v $(pwd):app/ node:$NODE_CONTAINER bash -c "cd app && yarn test"
  - yarn codecov